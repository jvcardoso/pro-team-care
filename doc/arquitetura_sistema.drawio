<?xml version='1.0' encoding='utf-8'?>
<mxfile host="app.diagrams.net" modified="2025-01-01T00:00:00.000Z" agent="Claude Code Pro" version="22.1.0" type="device">
  <diagram name="Arquitetura Clean Architecture" id="architecture-v2">
    <mxGraphModel dx="2000" dy="1400" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="3200" pageHeight="2400" math="0" shadow="0" background="#FFFFFF">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="main_title" value="&lt;b style='font-size:26px'&gt;ARQUITETURA DO SISTEMA - PRO TEAM CARE&lt;/b&gt;&lt;br/&gt;&lt;span style='font-size:14px'&gt;Clean Architecture (Hexagonal) + Multi-Tenant SaaS&lt;/span&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="100" y="20" width="3000" height="80" as="geometry" />
        </mxCell>
        <mxCell id="separator" value="" style="line;strokeWidth=3;fillColor=none;strokeColor=#2D7FDE;" vertex="1" parent="1">
          <mxGeometry x="100" y="100" width="3000" height="8" as="geometry" />
        </mxCell>
        <mxCell id="layer_frontend" value="&lt;b style='font-size:16px'&gt;🌐 PRESENTATION LAYER - FRONTEND&lt;/b&gt;&lt;br/&gt;&lt;span style='font-size:11px'&gt;React 18 + TypeScript + TailwindCSS + Flowbite • SPA (Single Page Application)&lt;/span&gt;" style="swimlane;whiteSpace=wrap;html=1;fillColor=#E3F2FD;strokeColor=#1976D2;strokeWidth=3;rounded=1;shadow=1;fontStyle=1;fontSize=14;swimlaneFillColor=#FFFFFF;startSize=60;" vertex="1" parent="1">
          <mxGeometry x="100" y="140" width="3000" height="340" as="geometry" />
        </mxCell>
        <mxCell id="frontend_pages" value="&lt;b&gt;📄 PAGES (27)&lt;/b&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#BBDEFB;strokeColor=#1565C0;strokeWidth=2;shadow=1;fontStyle=1;fontSize=12;align=center;verticalAlign=top;spacingTop=10;" vertex="1" parent="layer_frontend">
          <mxGeometry x="20" y="80" width="280" height="220" as="geometry" />
        </mxCell>
        <mxCell id="frontend_pages_items" value="&lt;span style='font-size:9px'&gt;• DashboardPage&lt;br/&gt;• CompaniesPage&lt;br/&gt;• EstablishmentsPage&lt;br/&gt;• ClientsPage&lt;br/&gt;• ContractsPage&lt;br/&gt;• MedicalAuthorizationsPage&lt;br/&gt;• BillingDashboardPage&lt;br/&gt;• UsersPage, RolesPage&lt;br/&gt;• ... e mais 19 páginas&lt;/span&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;spacingLeft=10;spacingRight=5;spacingTop=5;" vertex="1" parent="frontend_pages">
          <mxGeometry x="0" y="30" width="280" height="185" as="geometry" />
        </mxCell>
        <mxCell id="frontend_components" value="&lt;b&gt;🧩 COMPONENTS (50+)&lt;/b&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#BBDEFB;strokeColor=#1565C0;strokeWidth=2;shadow=1;fontStyle=1;fontSize=12;align=center;verticalAlign=top;spacingTop=10;" vertex="1" parent="layer_frontend">
          <mxGeometry x="320" y="80" width="280" height="220" as="geometry" />
        </mxCell>
        <mxCell id="frontend_components_items" value="&lt;span style='font-size:9px'&gt;• Forms: CompanyForm,&lt;br/&gt;•   ClientForm, ContractForm&lt;br/&gt;• Views: CompanyDetails,&lt;br/&gt;•   ClientDetails, ContractDetails&lt;br/&gt;• UI: Button, Modal, DataTable,&lt;br/&gt;•   Breadcrumb, Dropdown&lt;br/&gt;• Billing: ReceiptUpload&lt;br/&gt;• Dashboard widgets&lt;/span&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;spacingLeft=10;spacingRight=5;spacingTop=5;" vertex="1" parent="frontend_components">
          <mxGeometry x="0" y="30" width="280" height="185" as="geometry" />
        </mxCell>
        <mxCell id="frontend_services" value="&lt;b&gt;🔌 SERVICES (15+)&lt;/b&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#90CAF9;strokeColor=#0D47A1;strokeWidth=2;shadow=1;fontStyle=1;fontSize=12;align=center;verticalAlign=top;spacingTop=10;" vertex="1" parent="layer_frontend">
          <mxGeometry x="620" y="80" width="280" height="220" as="geometry" />
        </mxCell>
        <mxCell id="frontend_services_items" value="&lt;span style='font-size:9px'&gt;• api.js (Axios client)&lt;br/&gt;• companiesService&lt;br/&gt;• establishmentsService&lt;br/&gt;• clientsService&lt;br/&gt;• contractsService&lt;br/&gt;• billingService&lt;br/&gt;• b2bBillingService&lt;br/&gt;• medicalAuthorizationsService&lt;/span&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;spacingLeft=10;spacingRight=5;spacingTop=5;" vertex="1" parent="frontend_services">
          <mxGeometry x="0" y="30" width="280" height="185" as="geometry" />
        </mxCell>
        <mxCell id="frontend_hooks" value="&lt;b&gt;🪝 CUSTOM HOOKS (10+)&lt;/b&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#90CAF9;strokeColor=#0D47A1;strokeWidth=2;shadow=1;fontStyle=1;fontSize=12;align=center;verticalAlign=top;spacingTop=10;" vertex="1" parent="layer_frontend">
          <mxGeometry x="920" y="80" width="280" height="220" as="geometry" />
        </mxCell>
        <mxCell id="frontend_hooks_items" value="&lt;span style='font-size:9px'&gt;• useCompanyForm&lt;br/&gt;• useEstablishmentForm&lt;br/&gt;• useClientForm&lt;br/&gt;• useContractForm&lt;br/&gt;• useBreadcrumbs&lt;br/&gt;• useDataTable&lt;br/&gt;• useBillingDashboard&lt;br/&gt;• useAuth&lt;/span&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;spacingLeft=10;spacingRight=5;spacingTop=5;" vertex="1" parent="frontend_hooks">
          <mxGeometry x="0" y="30" width="280" height="185" as="geometry" />
        </mxCell>
        <mxCell id="frontend_contexts" value="&lt;b&gt;🌍 CONTEXTS&lt;/b&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#64B5F6;strokeColor=#0277BD;strokeWidth=2;shadow=1;fontStyle=1;fontSize=12;align=center;verticalAlign=top;spacingTop=10;" vertex="1" parent="layer_frontend">
          <mxGeometry x="1220" y="80" width="280" height="220" as="geometry" />
        </mxCell>
        <mxCell id="frontend_contexts_items" value="&lt;span style='font-size:9px'&gt;• AuthContext&lt;br/&gt;•   - user, login, logout&lt;br/&gt;•   - JWT token management&lt;br/&gt;•   - isAuthenticated state&lt;br/&gt;• &lt;br/&gt;• ThemeContext&lt;br/&gt;•   - Dark/Light mode&lt;br/&gt;•   - Theme persistence&lt;/span&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;spacingLeft=10;spacingRight=5;spacingTop=5;" vertex="1" parent="frontend_contexts">
          <mxGeometry x="0" y="30" width="280" height="185" as="geometry" />
        </mxCell>
        <mxCell id="frontend_routing" value="&lt;b&gt;🗺️ ROUTING&lt;/b&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#64B5F6;strokeColor=#0277BD;strokeWidth=2;shadow=1;fontStyle=1;fontSize=12;align=center;verticalAlign=top;spacingTop=10;" vertex="1" parent="layer_frontend">
          <mxGeometry x="1520" y="80" width="280" height="220" as="geometry" />
        </mxCell>
        <mxCell id="frontend_routing_items" value="&lt;span style='font-size:9px'&gt;• React Router v6&lt;br/&gt;• /login (public)&lt;br/&gt;• /admin/* (protected)&lt;br/&gt;•   - ProtectedRoute HOC&lt;br/&gt;•   - AdminLayout wrapper&lt;br/&gt;•   - Nested routes&lt;br/&gt;•   - Dynamic params&lt;br/&gt;•   - Breadcrumb navigation&lt;/span&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;spacingLeft=10;spacingRight=5;spacingTop=5;" vertex="1" parent="frontend_routing">
          <mxGeometry x="0" y="30" width="280" height="185" as="geometry" />
        </mxCell>
        <mxCell id="tech_frontend" value="&lt;b&gt;Stack:&lt;/b&gt; React 18 • TypeScript • Vite • TailwindCSS • Flowbite • React Router v6 • Axios" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF9C4;strokeColor=#F57F17;strokeWidth=2;fontStyle=1;fontSize=10;" vertex="1" parent="layer_frontend">
          <mxGeometry x="1820" y="100" width="1140" height="40" as="geometry" />
        </mxCell>
        <mxCell id="layer_api" value="&lt;b style='font-size:16px'&gt;🚀 PRESENTATION LAYER - BACKEND API&lt;/b&gt;&lt;br/&gt;&lt;span style='font-size:11px'&gt;FastAPI + Pydantic Schemas + Decorators de Permissões&lt;/span&gt;" style="swimlane;whiteSpace=wrap;html=1;fillColor=#FFF9C4;strokeColor=#F57F17;strokeWidth=3;rounded=1;shadow=1;fontStyle=1;fontSize=14;swimlaneFillColor=#FFFFFF;startSize=60;" vertex="1" parent="1">
          <mxGeometry x="100" y="520" width="3000" height="320" as="geometry" />
        </mxCell>
        <mxCell id="api_auth" value="&lt;b&gt;🔐 Auth &amp; Users&lt;/b&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF59D;strokeColor=#F9A825;strokeWidth=2;shadow=1;fontStyle=1;fontSize=12;align=center;verticalAlign=top;spacingTop=10;" vertex="1" parent="layer_api">
          <mxGeometry x="20" y="80" width="470" height="180" as="geometry" />
        </mxCell>
        <mxCell id="api_auth_items" value="&lt;span style='font-size:9px'&gt;• POST /login&lt;br/&gt;• POST /register&lt;br/&gt;• GET /me&lt;br/&gt;• GET /users&lt;br/&gt;• POST /users&lt;br/&gt;• PUT /users/{id}&lt;/span&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;spacingLeft=10;spacingRight=5;spacingTop=5;" vertex="1" parent="api_auth">
          <mxGeometry x="0" y="30" width="470" height="145" as="geometry" />
        </mxCell>
        <mxCell id="api_companies" value="&lt;b&gt;🏢 Companies&lt;/b&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF59D;strokeColor=#F9A825;strokeWidth=2;shadow=1;fontStyle=1;fontSize=12;align=center;verticalAlign=top;spacingTop=10;" vertex="1" parent="layer_api">
          <mxGeometry x="510" y="80" width="470" height="180" as="geometry" />
        </mxCell>
        <mxCell id="api_companies_items" value="&lt;span style='font-size:9px'&gt;• GET /companies&lt;br/&gt;• POST /companies&lt;br/&gt;• GET /companies/{id}&lt;br/&gt;• PUT /companies/{id}&lt;br/&gt;• DELETE /companies/{id}&lt;/span&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;spacingLeft=10;spacingRight=5;spacingTop=5;" vertex="1" parent="api_companies">
          <mxGeometry x="0" y="30" width="470" height="145" as="geometry" />
        </mxCell>
        <mxCell id="api_clients" value="&lt;b&gt;👥 Clients&lt;/b&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF59D;strokeColor=#F9A825;strokeWidth=2;shadow=1;fontStyle=1;fontSize=12;align=center;verticalAlign=top;spacingTop=10;" vertex="1" parent="layer_api">
          <mxGeometry x="1000" y="80" width="470" height="180" as="geometry" />
        </mxCell>
        <mxCell id="api_clients_items" value="&lt;span style='font-size:9px'&gt;• GET /clients&lt;br/&gt;• POST /clients&lt;br/&gt;• GET /clients/{id}&lt;br/&gt;• PUT /clients/{id}&lt;/span&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;spacingLeft=10;spacingRight=5;spacingTop=5;" vertex="1" parent="api_clients">
          <mxGeometry x="0" y="30" width="470" height="145" as="geometry" />
        </mxCell>
        <mxCell id="api_contracts" value="&lt;b&gt;📝 Contracts&lt;/b&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF59D;strokeColor=#F9A825;strokeWidth=2;shadow=1;fontStyle=1;fontSize=12;align=center;verticalAlign=top;spacingTop=10;" vertex="1" parent="layer_api">
          <mxGeometry x="1490" y="80" width="470" height="180" as="geometry" />
        </mxCell>
        <mxCell id="api_contracts_items" value="&lt;span style='font-size:9px'&gt;• GET /contracts&lt;br/&gt;• POST /contracts&lt;br/&gt;• GET /contracts/{id}&lt;br/&gt;• PUT /contracts/{id}&lt;/span&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;spacingLeft=10;spacingRight=5;spacingTop=5;" vertex="1" parent="api_contracts">
          <mxGeometry x="0" y="30" width="470" height="145" as="geometry" />
        </mxCell>
        <mxCell id="api_billing" value="&lt;b&gt;💰 Billing&lt;/b&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF59D;strokeColor=#F9A825;strokeWidth=2;shadow=1;fontStyle=1;fontSize=12;align=center;verticalAlign=top;spacingTop=10;" vertex="1" parent="layer_api">
          <mxGeometry x="1980" y="80" width="470" height="180" as="geometry" />
        </mxCell>
        <mxCell id="api_billing_items" value="&lt;span style='font-size:9px'&gt;• GET /invoices&lt;br/&gt;• POST /invoices&lt;br/&gt;• GET /receipts&lt;br/&gt;• POST /receipts/upload&lt;/span&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;spacingLeft=10;spacingRight=5;spacingTop=5;" vertex="1" parent="api_billing">
          <mxGeometry x="0" y="30" width="470" height="145" as="geometry" />
        </mxCell>
        <mxCell id="api_menus" value="&lt;b&gt;📋 Menus&lt;/b&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF59D;strokeColor=#F9A825;strokeWidth=2;shadow=1;fontStyle=1;fontSize=12;align=center;verticalAlign=top;spacingTop=10;" vertex="1" parent="layer_api">
          <mxGeometry x="2470" y="80" width="470" height="180" as="geometry" />
        </mxCell>
        <mxCell id="api_menus_items" value="&lt;span style='font-size:9px'&gt;• GET /menus&lt;br/&gt;• GET /menus/dynamic&lt;/span&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;spacingLeft=10;spacingRight=5;spacingTop=5;" vertex="1" parent="api_menus">
          <mxGeometry x="0" y="30" width="470" height="145" as="geometry" />
        </mxCell>
        <mxCell id="routers_info" value="&lt;b&gt;38 Routers&lt;/b&gt; • &lt;b&gt;200+ Endpoints REST&lt;/b&gt; • Autenticação JWT • Decoradores: @require_permission" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFEB3B;strokeColor=#F57F17;strokeWidth=2;fontStyle=1;fontSize=11;" vertex="1" parent="layer_api">
          <mxGeometry x="20" y="270" width="2960" height="30" as="geometry" />
        </mxCell>
        <mxCell id="layer_app" value="&lt;b style='font-size:16px'&gt;⚙️ APPLICATION LAYER&lt;/b&gt;&lt;br/&gt;&lt;span style='font-size:11px'&gt;Casos de Uso + Lógica de Negócio + Serviços&lt;/span&gt;" style="swimlane;whiteSpace=wrap;html=1;fillColor=#C8E6C9;strokeColor=#388E3C;strokeWidth=3;rounded=1;shadow=1;fontStyle=1;fontSize=14;swimlaneFillColor=#FFFFFF;startSize=60;" vertex="1" parent="1">
          <mxGeometry x="100" y="880" width="3000" height="280" as="geometry" />
        </mxCell>
        <mxCell id="app_usecases" value="&lt;b&gt;📋 USE CASES&lt;/b&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#A5D6A7;strokeColor=#2E7D32;strokeWidth=2;shadow=1;fontStyle=1;fontSize=12;align=center;verticalAlign=top;spacingTop=10;" vertex="1" parent="layer_app">
          <mxGeometry x="20" y="80" width="580" height="160" as="geometry" />
        </mxCell>
        <mxCell id="app_usecases_items" value="&lt;span style='font-size:9px'&gt;• CreateContractUseCase&lt;br/&gt;• DeleteCompanyUseCase&lt;br/&gt;• GenerateInvoiceUseCase&lt;br/&gt;• ApproveAuthorizationUseCase&lt;br/&gt;• ExecuteServiceUseCase&lt;br/&gt;• ... (Design Patterns: Command, Strategy)&lt;/span&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;spacingLeft=10;spacingRight=5;spacingTop=5;" vertex="1" parent="app_usecases">
          <mxGeometry x="0" y="30" width="580" height="125" as="geometry" />
        </mxCell>
        <mxCell id="app_services" value="&lt;b&gt;🔧 BUSINESS SERVICES (12+)&lt;/b&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#A5D6A7;strokeColor=#2E7D32;strokeWidth=2;shadow=1;fontStyle=1;fontSize=12;align=center;verticalAlign=top;spacingTop=10;" vertex="1" parent="layer_app">
          <mxGeometry x="620" y="80" width="700" height="160" as="geometry" />
        </mxCell>
        <mxCell id="app_services_items" value="&lt;span style='font-size:9px'&gt;• BillingService - Geração de faturas e cobrança&lt;br/&gt;• AuthService - Autenticação e autorização&lt;br/&gt;• ContractDashboardService - Métricas de contratos&lt;br/&gt;• PagBankService - Integração gateway pagamento&lt;br/&gt;• PagBankWebhookService - Processamento webhooks&lt;br/&gt;• AutomatedReportsService - Relatórios agendados&lt;br/&gt;• SystemOptimizationService - Performance&lt;/span&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;spacingLeft=10;spacingRight=5;spacingTop=5;" vertex="1" parent="app_services">
          <mxGeometry x="0" y="30" width="700" height="125" as="geometry" />
        </mxCell>
        <mxCell id="app_permissions" value="&lt;b&gt;🔐 AUTHORIZATION ENGINE&lt;/b&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#81C784;strokeColor=#1B5E20;strokeWidth=2;shadow=1;fontStyle=1;fontSize=12;align=center;verticalAlign=top;spacingTop=10;" vertex="1" parent="layer_app">
          <mxGeometry x="1340" y="80" width="640" height="160" as="geometry" />
        </mxCell>
        <mxCell id="app_permissions_items" value="&lt;span style='font-size:9px'&gt;• Sistema de Permissões Granulares:&lt;br/&gt;•   • 19 Roles (Admin, Manager, User, etc.)&lt;br/&gt;•   • 215 Permissions específicas&lt;br/&gt;•   • Contextos: system/company/establishment&lt;br/&gt;• Cache Redis para performance&lt;br/&gt;• Decorador: @require_permission('resource.action')&lt;/span&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;spacingLeft=10;spacingRight=5;spacingTop=5;" vertex="1" parent="app_permissions">
          <mxGeometry x="0" y="30" width="640" height="125" as="geometry" />
        </mxCell>
        <mxCell id="layer_infra" value="&lt;b style='font-size:16px'&gt;🏗️ INFRASTRUCTURE LAYER&lt;/b&gt;&lt;br/&gt;&lt;span style='font-size:11px'&gt;Repositórios + ORM + Database + Integrações Externas&lt;/span&gt;" style="swimlane;whiteSpace=wrap;html=1;fillColor=#FFE0B2;strokeColor=#E65100;strokeWidth=3;rounded=1;shadow=1;fontStyle=1;fontSize=14;swimlaneFillColor=#FFFFFF;startSize=60;" vertex="1" parent="1">
          <mxGeometry x="100" y="1200" width="3000" height="360" as="geometry" />
        </mxCell>
        <mxCell id="infra_repos" value="&lt;b&gt;📦 REPOSITORIES (15+)&lt;/b&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFCC80;strokeColor=#EF6C00;strokeWidth=2;shadow=1;fontStyle=1;fontSize=12;align=center;verticalAlign=top;spacingTop=10;" vertex="1" parent="layer_infra">
          <mxGeometry x="20" y="80" width="460" height="200" as="geometry" />
        </mxCell>
        <mxCell id="infra_repos_items" value="&lt;span style='font-size:9px'&gt;• CompanyRepository&lt;br/&gt;• EstablishmentRepository&lt;br/&gt;• ClientRepository&lt;br/&gt;• ContractRepository&lt;br/&gt;• BillingRepository&lt;br/&gt;• MedicalAuthorizationRepository&lt;br/&gt;• UserRepository&lt;br/&gt;• ... (Padrão Repository)&lt;/span&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;spacingLeft=10;spacingRight=5;spacingTop=5;" vertex="1" parent="infra_repos">
          <mxGeometry x="0" y="30" width="460" height="165" as="geometry" />
        </mxCell>
        <mxCell id="infra_orm" value="&lt;b&gt;🗂️ ORM MODELS (45)&lt;/b&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFCC80;strokeColor=#EF6C00;strokeWidth=2;shadow=1;fontStyle=1;fontSize=12;align=center;verticalAlign=top;spacingTop=10;" vertex="1" parent="layer_infra">
          <mxGeometry x="500" y="80" width="460" height="200" as="geometry" />
        </mxCell>
        <mxCell id="infra_orm_items" value="&lt;span style='font-size:9px'&gt;• SQLAlchemy Models:&lt;br/&gt;• User, Role, Permission&lt;br/&gt;• Company, Establishment&lt;br/&gt;• People, Client, Professional&lt;br/&gt;• Contract, ContractLive&lt;br/&gt;• MedicalAuthorization&lt;br/&gt;• ContractInvoice, PaymentReceipt&lt;br/&gt;• ... (2200+ linhas em models.py)&lt;/span&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;spacingLeft=10;spacingRight=5;spacingTop=5;" vertex="1" parent="infra_orm">
          <mxGeometry x="0" y="30" width="460" height="165" as="geometry" />
        </mxCell>
        <mxCell id="infra_db" value="&lt;b&gt;🗄️ DATABASE&lt;/b&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FF9800;strokeColor=#BF360C;strokeWidth=2;shadow=1;fontStyle=1;fontSize=12;align=center;verticalAlign=top;spacingTop=10;" vertex="1" parent="layer_infra">
          <mxGeometry x="980" y="80" width="460" height="200" as="geometry" />
        </mxCell>
        <mxCell id="infra_db_items" value="&lt;span style='font-size:9px'&gt;• PostgreSQL 14+&lt;br/&gt;• Schema: master&lt;br/&gt;• 45 Tabelas&lt;br/&gt;• 96 Foreign Keys&lt;br/&gt;• Indexes otimizados&lt;br/&gt;• Migrations: Alembic (17 migrations)&lt;br/&gt;• Multi-tenant por company_id&lt;/span&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;spacingLeft=10;spacingRight=5;spacingTop=5;" vertex="1" parent="infra_db">
          <mxGeometry x="0" y="30" width="460" height="165" as="geometry" />
        </mxCell>
        <mxCell id="infra_external" value="&lt;b&gt;🌐 EXTERNAL SERVICES&lt;/b&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FF9800;strokeColor=#BF360C;strokeWidth=2;shadow=1;fontStyle=1;fontSize=12;align=center;verticalAlign=top;spacingTop=10;" vertex="1" parent="layer_infra">
          <mxGeometry x="1460" y="80" width="520" height="200" as="geometry" />
        </mxCell>
        <mxCell id="infra_external_items" value="&lt;span style='font-size:9px'&gt;• PagBank API (Pagamentos)&lt;br/&gt;•   - Cobrança recorrente&lt;br/&gt;•   - Webhooks&lt;br/&gt;• Redis Cache&lt;br/&gt;•   - Permissões&lt;br/&gt;•   - Sessions&lt;br/&gt;• Geocoding APIs&lt;br/&gt;• Email Service (SMTP)&lt;/span&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;spacingLeft=10;spacingRight=5;spacingTop=5;" vertex="1" parent="infra_external">
          <mxGeometry x="0" y="30" width="520" height="165" as="geometry" />
        </mxCell>
        <mxCell id="infra_auth" value="&lt;b&gt;🔑 AUTH &amp; SECURITY&lt;/b&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFB74D;strokeColor=#E65100;strokeWidth=2;shadow=1;fontStyle=1;fontSize=12;align=center;verticalAlign=top;spacingTop=10;" vertex="1" parent="layer_infra">
          <mxGeometry x="2000" y="80" width="460" height="200" as="geometry" />
        </mxCell>
        <mxCell id="infra_auth_items" value="&lt;span style='font-size:9px'&gt;• JWT Token Generation&lt;br/&gt;• Password Hashing (bcrypt)&lt;br/&gt;• Token Validation&lt;br/&gt;• Refresh Token Logic&lt;br/&gt;• Session Management&lt;br/&gt;• CORS Configuration&lt;br/&gt;• Rate Limiting&lt;/span&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;spacingLeft=10;spacingRight=5;spacingTop=5;" vertex="1" parent="infra_auth">
          <mxGeometry x="0" y="30" width="460" height="165" as="geometry" />
        </mxCell>
        <mxCell id="layer_domain" value="&lt;b style='font-size:16px'&gt;💎 DOMAIN LAYER&lt;/b&gt;&lt;br/&gt;&lt;span style='font-size:11px'&gt;Entidades de Negócio Puras + Value Objects + Regras de Domínio&lt;/span&gt;" style="swimlane;whiteSpace=wrap;html=1;fillColor=#F8BBD0;strokeColor=#C2185B;strokeWidth=3;rounded=1;shadow=1;fontStyle=1;fontSize=14;swimlaneFillColor=#FFFFFF;startSize=60;" vertex="1" parent="1">
          <mxGeometry x="100" y="1600" width="3000" height="220" as="geometry" />
        </mxCell>
        <mxCell id="domain_entities" value="&lt;b&gt;🏛️ ENTITIES&lt;/b&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F48FB1;strokeColor=#AD1457;strokeWidth=2;shadow=1;fontStyle=1;fontSize=12;align=center;verticalAlign=top;spacingTop=10;" vertex="1" parent="layer_domain">
          <mxGeometry x="20" y="80" width="900" height="100" as="geometry" />
        </mxCell>
        <mxCell id="domain_entities_items" value="&lt;span style='font-size:9px'&gt;• User • Role • Permission • Company • Establishment&lt;br/&gt;• People • Client • Professional • Contract • ContractLive&lt;br/&gt;• MedicalAuthorization • ServiceExecution • Invoice • PaymentReceipt&lt;/span&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;spacingLeft=10;spacingRight=5;spacingTop=5;" vertex="1" parent="domain_entities">
          <mxGeometry x="0" y="30" width="900" height="65" as="geometry" />
        </mxCell>
        <mxCell id="domain_values" value="&lt;b&gt;📐 VALUE OBJECTS &amp; ENUMS&lt;/b&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F48FB1;strokeColor=#AD1457;strokeWidth=2;shadow=1;fontStyle=1;fontSize=12;align=center;verticalAlign=top;spacingTop=10;" vertex="1" parent="layer_domain">
          <mxGeometry x="940" y="80" width="900" height="100" as="geometry" />
        </mxCell>
        <mxCell id="domain_values_items" value="&lt;span style='font-size:9px'&gt;• ContractType, ContractStatus, InvoiceStatus, VerificationStatus&lt;br/&gt;• PaymentMethod, BillingCycle, ServiceCategory, Priority, ContextType&lt;/span&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;spacingLeft=10;spacingRight=5;spacingTop=5;" vertex="1" parent="domain_values">
          <mxGeometry x="0" y="30" width="900" height="65" as="geometry" />
        </mxCell>
        <mxCell id="domain_rules" value="&lt;b&gt;📜 BUSINESS RULES&lt;/b&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#EC407A;strokeColor=#880E4F;strokeWidth=2;shadow=1;fontStyle=1;fontSize=12;align=center;verticalAlign=top;spacingTop=10;" vertex="1" parent="layer_domain">
          <mxGeometry x="1860" y="80" width="600" height="100" as="geometry" />
        </mxCell>
        <mxCell id="domain_rules_items" value="&lt;span style='font-size:9px'&gt;• Validações de Domínio&lt;br/&gt;• Invariantes de Negócio&lt;br/&gt;• Políticas de Contratos&lt;/span&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;spacingLeft=10;spacingRight=5;spacingTop=5;" vertex="1" parent="domain_rules">
          <mxGeometry x="0" y="30" width="600" height="65" as="geometry" />
        </mxCell>
        <mxCell id="arrow_frontend_api" value="HTTP/REST&#10;JSON" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=3;fontSize=11;fontStyle=1;strokeColor=#1976D2;" edge="1" parent="1" source="frontend_services" target="layer_api">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arrow_api_app" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=3;fontSize=11;fontStyle=1;strokeColor=#F57F17;" edge="1" parent="1" source="layer_api" target="app_services">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arrow_app_infra" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=3;fontSize=11;fontStyle=1;strokeColor=#388E3C;" edge="1" parent="1" source="app_services" target="infra_repos">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arrow_infra_db" value="SQL" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=3;fontSize=11;fontStyle=1;strokeColor=#E65100;" edge="1" parent="1" source="infra_orm" target="infra_db">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arrow_app_domain" value="usa" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=3;fontSize=11;fontStyle=1;strokeColor=#C2185B;dashed=1;" edge="1" parent="1" source="app_usecases" target="domain_entities">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="db_server" value="&lt;b style='font-size:14px'&gt;🗄️ PostgreSQL Server&lt;/b&gt;&lt;br/&gt;&lt;br/&gt;&lt;b&gt;Host:&lt;/b&gt; 192.168.11.62:5432&lt;br/&gt;&lt;b&gt;Database:&lt;/b&gt; pro_team_care_11&lt;br/&gt;&lt;b&gt;Schema:&lt;/b&gt; master&lt;br/&gt;&lt;b&gt;Tabelas:&lt;/b&gt; 45&lt;br/&gt;&lt;b&gt;FKs:&lt;/b&gt; 96&lt;br/&gt;&lt;b&gt;Encoding:&lt;/b&gt; UTF-8" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;fillColor=#B0BEC5;strokeColor=#37474F;strokeWidth=3;shadow=1;fontStyle=0;fontSize=11;align=left;spacingLeft=15;" vertex="1" parent="1">
          <mxGeometry x="3220" y="1280" width="280" height="220" as="geometry" />
        </mxCell>
        <mxCell id="arrow_db_server" value="PostgreSQL&#10;Driver" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=3;fontSize=11;fontStyle=1;strokeColor=#37474F;" edge="1" parent="1" source="infra_db" target="db_server">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="footer_box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F5F5F5;strokeColor=#666666;strokeWidth=2;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="100" y="1860" width="3400" height="110" as="geometry" />
        </mxCell>
        <mxCell id="footer_title" value="&lt;b style='font-size:14px'&gt;STACK TECNOLÓGICO COMPLETO&lt;/b&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontStyle=1;spacingLeft=20;" vertex="1" parent="1">
          <mxGeometry x="100" y="1870" width="400" height="30" as="geometry" />
        </mxCell>
        <mxCell id="footer_content" value="&lt;table style='font-size:10px; width:100%; border-collapse: collapse;'&gt;&#10;&lt;tr&gt;&#10;  &lt;td style='padding:3px 20px;'&gt;&lt;b&gt;🐍 Backend:&lt;/b&gt; Python 3.12 + FastAPI + SQLAlchemy + Alembic + Pydantic&lt;/td&gt;&#10;  &lt;td style='padding:3px 20px;'&gt;&lt;b&gt;⚛️ Frontend:&lt;/b&gt; React 18 + TypeScript + Vite + TailwindCSS + Flowbite&lt;/td&gt;&#10;&lt;/tr&gt;&#10;&lt;tr&gt;&#10;  &lt;td style='padding:3px 20px;'&gt;&lt;b&gt;🗄️ Database:&lt;/b&gt; PostgreSQL 14+ (schema master, 45 tabelas)&lt;/td&gt;&#10;  &lt;td style='padding:3px 20px;'&gt;&lt;b&gt;🔐 Auth:&lt;/b&gt; JWT + bcrypt + 215 permissões granulares&lt;/td&gt;&#10;&lt;/tr&gt;&#10;&lt;tr&gt;&#10;  &lt;td style='padding:3px 20px;'&gt;&lt;b&gt;🚀 API:&lt;/b&gt; REST (200+ endpoints) + OpenAPI/Swagger&lt;/td&gt;&#10;  &lt;td style='padding:3px 20px;'&gt;&lt;b&gt;📦 Cache:&lt;/b&gt; Redis (permissões + sessões)&lt;/td&gt;&#10;&lt;/tr&gt;&#10;&lt;tr&gt;&#10;  &lt;td style='padding:3px 20px;'&gt;&lt;b&gt;🏗️ Arquitetura:&lt;/b&gt; Clean Architecture (Hexagonal)&lt;/td&gt;&#10;  &lt;td style='padding:3px 20px;'&gt;&lt;b&gt;🌐 Integrações:&lt;/b&gt; PagBank API + Geocoding&lt;/td&gt;&#10;&lt;/tr&gt;&#10;&lt;/table&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="120" y="1895" width="3360" height="70" as="geometry" />
        </mxCell>
        <mxCell id="signature" value="&lt;i&gt;Gerado automaticamente por Claude Code • Arquitetura validada com código-fonte real • Pro Team Care © 2025&lt;/i&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=9;fontColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="100" y="1975" width="3400" height="20" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
