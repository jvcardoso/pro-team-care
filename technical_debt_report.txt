================================================================================
RELATÃ“RIO DE DÃVIDA TÃ‰CNICA - PRO TEAM CARE
================================================================================

ğŸ“Š ESTATÃSTICAS GERAIS
----------------------------------------
Arquivos Python analisados: 95
Arquivos com anÃ¡lise de complexidade: 73
Duplicatas entre arquivos encontradas: 531

ğŸ§  ANÃLISE DE COMPLEXIDADE
----------------------------------------
ğŸ“ validate_apis.py
  FunÃ§Ãµes: 9
  Complexidade total: 81
  FunÃ§Ãµes de alta complexidade (>10): 4
  ğŸ”´ FunÃ§Ãµes crÃ­ticas:
    - APIValidator (complexidade: 12, linha: 23)
    - _parse_file (complexidade: 23, linha: 39)
    - find_similar_functionality (complexidade: 20, linha: 133)
    - generate_report (complexidade: 14, linha: 171)

ğŸ“ reset_admin_password.py
  FunÃ§Ãµes: 2
  Complexidade total: 3
  FunÃ§Ãµes de alta complexidade (>10): 0

ğŸ“ debug_db.py
  FunÃ§Ãµes: 1
  Complexidade total: 7
  FunÃ§Ãµes de alta complexidade (>10): 0

ğŸ“ create_admin_user.py
  FunÃ§Ãµes: 1
  Complexidade total: 3
  FunÃ§Ãµes de alta complexidade (>10): 0

ğŸ“ alembic/env.py
  FunÃ§Ãµes: 4
  Complexidade total: 4
  FunÃ§Ãµes de alta complexidade (>10): 0

ğŸ“ alembic/versions/3eb1e8fb6842_initial_migration_reverse_engineering_.py
  FunÃ§Ãµes: 2
  Complexidade total: 2
  FunÃ§Ãµes de alta complexidade (>10): 0

ğŸ“ alembic/versions/4c47259799c2_initial_sync_with_existing_database_.py
  FunÃ§Ãµes: 2
  Complexidade total: 2
  FunÃ§Ãµes de alta complexidade (>10): 0

ğŸ“ alembic/versions/f6c3a4d2e4db_add_enrichment_fields_to_addresses.py
  FunÃ§Ãµes: 2
  Complexidade total: 2
  FunÃ§Ãµes de alta complexidade (>10): 0

ğŸ“ tests/test_validators_simple.py
  FunÃ§Ãµes: 26
  Complexidade total: 92
  FunÃ§Ãµes de alta complexidade (>10): 0

ğŸ“ tests/test_health.py
  FunÃ§Ãµes: 5
  Complexidade total: 27
  FunÃ§Ãµes de alta complexidade (>10): 0

ğŸ“ tests/test_validators.py
  FunÃ§Ãµes: 35
  Complexidade total: 121
  FunÃ§Ãµes de alta complexidade (>10): 0

ğŸ“ tests/test_menus.py
  FunÃ§Ãµes: 21
  Complexidade total: 89
  FunÃ§Ãµes de alta complexidade (>10): 0

ğŸ“ tests/test_companies.py
  FunÃ§Ãµes: 14
  Complexidade total: 48
  FunÃ§Ãµes de alta complexidade (>10): 0

ğŸ“ tests/test_auth.py
  FunÃ§Ãµes: 7
  Complexidade total: 31
  FunÃ§Ãµes de alta complexidade (>10): 0

ğŸ“ tests/test_companies_integration.py
  FunÃ§Ãµes: 10
  Complexidade total: 43
  FunÃ§Ãµes de alta complexidade (>10): 0

ğŸ“ tests/conftest.py
  FunÃ§Ãµes: 7
  Complexidade total: 10
  FunÃ§Ãµes de alta complexidade (>10): 0

ğŸ“ tests/test_menus_integration.py
  FunÃ§Ãµes: 11
  Complexidade total: 42
  FunÃ§Ãµes de alta complexidade (>10): 0

ğŸ“ tests/test_repositories.py
  FunÃ§Ãµes: 6
  Complexidade total: 26
  FunÃ§Ãµes de alta complexidade (>10): 0

ğŸ“ tests/test_monitoring.py
  FunÃ§Ãµes: 8
  Complexidade total: 42
  FunÃ§Ãµes de alta complexidade (>10): 0

ğŸ“ tests/test_main.py
  FunÃ§Ãµes: 3
  Complexidade total: 11
  FunÃ§Ãµes de alta complexidade (>10): 0

ğŸ“ tests/test_security_middleware.py
  FunÃ§Ãµes: 41
  Complexidade total: 146
  FunÃ§Ãµes de alta complexidade (>10): 0

ğŸ“ tests/test_companies_endpoints.py
  FunÃ§Ãµes: 31
  Complexidade total: 112
  FunÃ§Ãµes de alta complexidade (>10): 0

ğŸ“ tests/test_security_basic.py
  FunÃ§Ãµes: 24
  Complexidade total: 77
  FunÃ§Ãµes de alta complexidade (>10): 0

ğŸ“ tests/architecture/test_clean_architecture.py
  FunÃ§Ãµes: 16
  Complexidade total: 78
  FunÃ§Ãµes de alta complexidade (>10): 0

ğŸ“ app/main.py
  FunÃ§Ãµes: 5
  Complexidade total: 10
  FunÃ§Ãµes de alta complexidade (>10): 0

ğŸ“ app/utils/validators.py
  FunÃ§Ãµes: 5
  Complexidade total: 33
  FunÃ§Ãµes de alta complexidade (>10): 1
  ğŸ”´ FunÃ§Ãµes crÃ­ticas:
    - validate_contacts_quality (complexidade: 12, linha: 103)

ğŸ“ app/application/dto/user_dto.py
  FunÃ§Ãµes: 3
  Complexidade total: 3
  FunÃ§Ãµes de alta complexidade (>10): 0

ğŸ“ app/application/dto/company_dto.py
  FunÃ§Ãµes: 5
  Complexidade total: 5
  FunÃ§Ãµes de alta complexidade (>10): 0

ğŸ“ app/application/use_cases/create_company_use_case.py
  FunÃ§Ãµes: 5
  Complexidade total: 12
  FunÃ§Ãµes de alta complexidade (>10): 0

ğŸ“ app/application/use_cases/delete_company_use_case.py
  FunÃ§Ãµes: 3
  Complexidade total: 7
  FunÃ§Ãµes de alta complexidade (>10): 0

ğŸ“ app/application/use_cases/get_company_use_case.py
  FunÃ§Ãµes: 5
  Complexidade total: 11
  FunÃ§Ãµes de alta complexidade (>10): 0

ğŸ“ app/application/use_cases/auth_use_case.py
  FunÃ§Ãµes: 6
  Complexidade total: 10
  FunÃ§Ãµes de alta complexidade (>10): 0

ğŸ“ app/application/use_cases/update_company_use_case.py
  FunÃ§Ãµes: 3
  Complexidade total: 12
  FunÃ§Ãµes de alta complexidade (>10): 0

ğŸ“ app/application/interfaces/external.py
  FunÃ§Ãµes: 7
  Complexidade total: 10
  FunÃ§Ãµes de alta complexidade (>10): 0

ğŸ“ app/application/interfaces/repositories.py
  FunÃ§Ãµes: 13
  Complexidade total: 15
  FunÃ§Ãµes de alta complexidade (>10): 0

ğŸ“ app/application/interfaces/services.py
  FunÃ§Ãµes: 15
  Complexidade total: 19
  FunÃ§Ãµes de alta complexidade (>10): 0

ğŸ“ app/presentation/schemas/user_legacy.py
  FunÃ§Ãµes: 7
  Complexidade total: 7
  FunÃ§Ãµes de alta complexidade (>10): 0

ğŸ“ app/presentation/schemas/company_legacy.py
  FunÃ§Ãµes: 29
  Complexidade total: 29
  FunÃ§Ãµes de alta complexidade (>10): 0

ğŸ“ app/presentation/schemas/user.py
  FunÃ§Ãµes: 7
  Complexidade total: 7
  FunÃ§Ãµes de alta complexidade (>10): 0

ğŸ“ app/presentation/schemas/company.py
  FunÃ§Ãµes: 29
  Complexidade total: 29
  FunÃ§Ãµes de alta complexidade (>10): 0

ğŸ“ app/presentation/api/v1/health.py
  FunÃ§Ãµes: 7
  Complexidade total: 20
  FunÃ§Ãµes de alta complexidade (>10): 0

ğŸ“ app/presentation/api/v1/metrics.py
  FunÃ§Ãµes: 4
  Complexidade total: 9
  FunÃ§Ãµes de alta complexidade (>10): 0

ğŸ“ app/presentation/api/v1/auth.py
  FunÃ§Ãµes: 4
  Complexidade total: 6
  FunÃ§Ãµes de alta complexidade (>10): 0

ğŸ“ app/presentation/api/v1/menus.py
  FunÃ§Ãµes: 9
  Complexidade total: 34
  FunÃ§Ãµes de alta complexidade (>10): 2
  ğŸ”´ FunÃ§Ãµes crÃ­ticas:
    - get_user_dynamic_menus (complexidade: 14, linha: 84)
    - debug_menu_structure (complexidade: 12, linha: 311)

ğŸ“ app/presentation/api/v1/cnpj.py
  FunÃ§Ãµes: 7
  Complexidade total: 38
  FunÃ§Ãµes de alta complexidade (>10): 1
  ğŸ”´ FunÃ§Ãµes crÃ­ticas:
    - mapear_dados_receita (complexidade: 21, linha: 265)

ğŸ“ app/presentation/api/v1/geocoding.py
  FunÃ§Ãµes: 9
  Complexidade total: 31
  FunÃ§Ãµes de alta complexidade (>10): 0

ğŸ“ app/presentation/api/v1/companies.py
  FunÃ§Ãµes: 9
  Complexidade total: 29
  FunÃ§Ãµes de alta complexidade (>10): 0

ğŸ“ app/infrastructure/security_middleware.py
  FunÃ§Ãµes: 2
  Complexidade total: 5
  FunÃ§Ãµes de alta complexidade (>10): 0

ğŸ“ app/infrastructure/exceptions.py
  FunÃ§Ãµes: 10
  Complexidade total: 13
  FunÃ§Ãµes de alta complexidade (>10): 0

ğŸ“ app/infrastructure/auth.py
  FunÃ§Ãµes: 7
  Complexidade total: 14
  FunÃ§Ãµes de alta complexidade (>10): 0

ğŸ“ app/infrastructure/rate_limiting.py
  FunÃ§Ãµes: 3
  Complexidade total: 7
  FunÃ§Ãµes de alta complexidade (>10): 0

ğŸ“ app/infrastructure/database.py
  FunÃ§Ãµes: 2
  Complexidade total: 2
  FunÃ§Ãµes de alta complexidade (>10): 0

ğŸ“ app/infrastructure/services/auth_service.py
  FunÃ§Ãµes: 4
  Complexidade total: 5
  FunÃ§Ãµes de alta complexidade (>10): 0

ğŸ“ app/infrastructure/services/address_enrichment_service.py
  FunÃ§Ãµes: 7
  Complexidade total: 49
  FunÃ§Ãµes de alta complexidade (>10): 1
  ğŸ”´ FunÃ§Ãµes crÃ­ticas:
    - enrich_address (complexidade: 24, linha: 98)

ğŸ“ app/infrastructure/cache/simplified_redis.py
  FunÃ§Ãµes: 17
  Complexidade total: 75
  FunÃ§Ãµes de alta complexidade (>10): 0

ğŸ“ app/infrastructure/cache/mock_redis.py
  FunÃ§Ãµes: 25
  Complexidade total: 61
  FunÃ§Ãµes de alta complexidade (>10): 0

ğŸ“ app/infrastructure/cache/decorators.py
  FunÃ§Ãµes: 7
  Complexidade total: 16
  FunÃ§Ãµes de alta complexidade (>10): 0

ğŸ“ app/infrastructure/monitoring/metrics.py
  FunÃ§Ãµes: 20
  Complexidade total: 27
  FunÃ§Ãµes de alta complexidade (>10): 0

ğŸ“ app/infrastructure/monitoring/middleware.py
  FunÃ§Ãµes: 8
  Complexidade total: 15
  FunÃ§Ãµes de alta complexidade (>10): 0

ğŸ“ app/infrastructure/orm/models.py
  FunÃ§Ãµes: 5
  Complexidade total: 5
  FunÃ§Ãµes de alta complexidade (>10): 0

ğŸ“ app/infrastructure/repositories/company_repository.py
  FunÃ§Ãµes: 11
  Complexidade total: 126
  FunÃ§Ãµes de alta complexidade (>10): 3
  ğŸ”´ FunÃ§Ãµes crÃ­ticas:
    - CompanyRepository (complexidade: 12, linha: 17)
    - create_company (complexidade: 23, linha: 60)
    - update_company (complexidade: 58, linha: 436)

ğŸ“ app/infrastructure/repositories/user_repository.py
  FunÃ§Ãµes: 9
  Complexidade total: 16
  FunÃ§Ãµes de alta complexidade (>10): 0

ğŸ“ app/infrastructure/entities/user.py
  FunÃ§Ãµes: 1
  Complexidade total: 1
  FunÃ§Ãµes de alta complexidade (>10): 0

ğŸ“ app/domain/repositories/menu_repository.py
  FunÃ§Ãµes: 8
  Complexidade total: 40
  FunÃ§Ãµes de alta complexidade (>10): 1
  ğŸ”´ FunÃ§Ãµes crÃ­ticas:
    - get_context_info (complexidade: 12, linha: 348)

ğŸ“ app/domain/repositories/user_repository.py
  FunÃ§Ãµes: 6
  Complexidade total: 7
  FunÃ§Ãµes de alta complexidade (>10): 0

ğŸ“ app/domain/entities/user.py
  FunÃ§Ãµes: 8
  Complexidade total: 10
  FunÃ§Ãµes de alta complexidade (>10): 0

ğŸ“ app/domain/entities/company.py
  FunÃ§Ãµes: 26
  Complexidade total: 70
  FunÃ§Ãµes de alta complexidade (>10): 0

ğŸ“ config/settings.py
  FunÃ§Ãµes: 14
  Complexidade total: 22
  FunÃ§Ãµes de alta complexidade (>10): 0

ğŸ“ scripts/validate_address_data.py
  FunÃ§Ãµes: 1
  Complexidade total: 15
  FunÃ§Ãµes de alta complexidade (>10): 1
  ğŸ”´ FunÃ§Ãµes crÃ­ticas:
    - audit_address_data (complexidade: 15, linha: 11)

ğŸ“ scripts/test_coverage.py
  FunÃ§Ãµes: 2
  Complexidade total: 8
  FunÃ§Ãµes de alta complexidade (>10): 0

ğŸ“ scripts/coverage_smart.py
  FunÃ§Ãµes: 2
  Complexidade total: 5
  FunÃ§Ãµes de alta complexidade (>10): 0

ğŸ“ scripts/audit_company_address.py
  FunÃ§Ãµes: 1
  Complexidade total: 15
  FunÃ§Ãµes de alta complexidade (>10): 1
  ğŸ”´ FunÃ§Ãµes crÃ­ticas:
    - audit_address_data (complexidade: 15, linha: 12)

ğŸ“ scripts/audit_technical_debt.py
  FunÃ§Ãµes: 8
  Complexidade total: 65
  FunÃ§Ãµes de alta complexidade (>10): 2
  ğŸ”´ FunÃ§Ãµes crÃ­ticas:
    - analyze_duplicates (complexidade: 13, linha: 78)
    - generate_report (complexidade: 17, linha: 169)

ğŸ“ˆ RESUMO GERAL DE COMPLEXIDADE
Total de funÃ§Ãµes analisadas: 698
FunÃ§Ãµes de alta complexidade: 17
Complexidade mÃ©dia por funÃ§Ã£o: 3.1

ğŸ“‹ DUPLICATAS ENTRE ARQUIVOS
----------------------------------------
ğŸ”„ Linha duplicada (6 ocorrÃªncias):
  ğŸ“ from dataclasses import dataclass
  ğŸ“ Arquivos: validate_apis.py, app/application/dto/user_dto.py, app/application/dto/company_dto.py, app/infrastructure/auth.py, app/domain/entities/user.py

ğŸ”„ Linha duplicada (5 ocorrÃªncias):
  ğŸ“ from pathlib import Path
  ğŸ“ Arquivos: validate_apis.py, tests/architecture/test_clean_architecture.py, scripts/test_coverage.py, scripts/coverage_smart.py, scripts/audit_technical_debt.py

ğŸ”„ Linha duplicada (2 ocorrÃªncias):
  ğŸ“ def generate_report(self) -> str:
  ğŸ“ Arquivos: validate_apis.py, scripts/audit_technical_debt.py

ğŸ”„ Linha duplicada (17 ocorrÃªncias):
  ğŸ“ report.append(STR * NUM)
  ğŸ“ Arquivos: validate_apis.py, scripts/audit_technical_debt.py

ğŸ”„ Linha duplicada (2 ocorrÃªncias):
  ğŸ“ return STR.join(report)
  ğŸ“ Arquivos: validate_apis.py, scripts/audit_technical_debt.py

ğŸ”„ Linha duplicada (2 ocorrÃªncias):
  ğŸ“ with open(report_file, STR, encoding=STR) as f:
  ğŸ“ Arquivos: validate_apis.py, scripts/audit_technical_debt.py

ğŸ”„ Linha duplicada (3 ocorrÃªncias):
  ğŸ“ from passlib.context import CryptContext
  ğŸ“ Arquivos: reset_admin_password.py, create_admin_user.py, app/infrastructure/auth.py

ğŸ”„ Linha duplicada (2 ocorrÃªncias):
  ğŸ“ connection = await asyncpg.connect(
  ğŸ“ Arquivos: reset_admin_password.py, create_admin_user.py

ğŸ”„ Linha duplicada (2 ocorrÃªncias):
  ğŸ“ password=DB_PASSWORD,
  ğŸ“ Arquivos: reset_admin_password.py, create_admin_user.py

ğŸ”„ Linha duplicada (2 ocorrÃªncias):
  ğŸ“ database=DB_DATABASE,
  ğŸ“ Arquivos: reset_admin_password.py, create_admin_user.py

ğŸ”„ Linha duplicada (2 ocorrÃªncias):
  ğŸ“ server_settings={STR: fSTR}
  ğŸ“ Arquivos: reset_admin_password.py, create_admin_user.py

ğŸ”„ Linha duplicada (60 ocorrÃªncias):
  ğŸ“ except Exception as e:
  ğŸ“ Arquivos: reset_admin_password.py, debug_db.py, create_admin_user.py, tests/test_companies_integration.py, tests/conftest.py

ğŸ”„ Linha duplicada (2 ocorrÃªncias):
  ğŸ“ await connection.close()
  ğŸ“ Arquivos: reset_admin_password.py, create_admin_user.py

ğŸ”„ Linha duplicada (3 ocorrÃªncias):
  ğŸ“ from sqlalchemy.ext.asyncio import AsyncSession, create_async_engine
  ğŸ“ Arquivos: debug_db.py, tests/conftest.py, app/infrastructure/database.py

ğŸ”„ Linha duplicada (5 ocorrÃªncias):
  ğŸ“ from sqlalchemy import text
  ğŸ“ Arquivos: debug_db.py, tests/test_menus_integration.py, app/presentation/api/v1/health.py, app/presentation/api/v1/menus.py, app/domain/repositories/menu_repository.py

ğŸ”„ Linha duplicada (2 ocorrÃªncias):
  ğŸ“ from dotenv import load_dotenv
  ğŸ“ Arquivos: debug_db.py, config/settings.py

ğŸ”„ Linha duplicada (4 ocorrÃªncias):
  ğŸ“ row = result.fetchone()
  ğŸ“ Arquivos: debug_db.py, app/domain/repositories/menu_repository.py

ğŸ”„ Linha duplicada (14 ocorrÃªncias):
  ğŸ“ from datetime import datetime
  ğŸ“ Arquivos: create_admin_user.py, tests/test_companies.py, tests/test_companies_integration.py, tests/test_companies_endpoints.py, app/presentation/schemas/user_legacy.py

ğŸ”„ Linha duplicada (2 ocorrÃªncias):
  ğŸ“ pwd_context = CryptContext(schemes=[STR], deprecated=STR)
  ğŸ“ Arquivos: create_admin_user.py, app/infrastructure/auth.py

ğŸ”„ Linha duplicada (2 ocorrÃªncias):
  ğŸ“ from app.infrastructure.orm.models import Base
  ğŸ“ Arquivos: alembic/env.py, tests/conftest.py

ğŸ“Š Total de duplicatas encontradas: 531

ğŸ’¡ RECOMENDAÃ‡Ã•ES PARA REDUÃ‡ÃƒO DE DÃVIDA TÃ‰CNICA
----------------------------------------
ğŸ”´ REFACTORING CRÃTICO:
   - Quebrar funÃ§Ãµes com complexidade > 10 em funÃ§Ãµes menores
   - Aplicar padrÃ£o Strategy para lÃ³gica condicional complexa
   - Extrair mÃ©todos privados para reduzir complexidade
ğŸŸ¡ ELIMINAÃ‡ÃƒO DE DUPLICATAS:
   - Criar funÃ§Ãµes utilitÃ¡rias para cÃ³digo comum
   - Implementar padrÃ£o Template Method
   - Usar heranÃ§a ou composiÃ§Ã£o para evitar duplicaÃ§Ã£o

ğŸš€ PRÃ“XIMOS PASSOS
----------------------------------------
1. Instalar radon: pip install radon
2. Executar anÃ¡lise completa: python scripts/audit_technical_debt.py
3. Priorizar refactoring das funÃ§Ãµes mais complexas
4. Implementar testes antes de refatorar
5. Revisar cÃ³digo duplicado e extrair abstraÃ§Ãµes

ğŸ“… Data da anÃ¡lise: 2025-09-04 19:02:22
================================================================================